{% extends 'admin/MenuAdmin.html' %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'admin/css/listar_personal.css' %}">
{% endblock %}

{% block title %}Listado de Pacientes - BioSalud{% endblock %}

{% block contenido %}
<div class="listado-card">
    <h2>Listado de Pacientes</h2>
    <div class="top-actions">
        <a href="{% url 'registrar_paciente' %}" class="btn-nuevo">+ Registrar nuevo</a>
        <a href="{% url 'exportar_pacientes' %}" class="btn-nuevo">Exportar CSV</a>
    </div>
    <form method="get" class="form-grid" id="form-buscar-pacientes" style="margin-bottom:20px;">
        <div class="form-field"><input type="text" name="nombre" id="buscar-nombre" placeholder="Nombre" value="{{ nombre }}"></div>
        <div class="form-field"><input type="text" name="ci" id="buscar-ci" placeholder="Cédula" value="{{ ci }}"></div>
        <div class="form-field">
            <button type="submit" class="btn-buscar">Buscar</button>
        </div>
    </form>
    <div class="tabla-scroll">
        <table class="tabla-personal">
            <thead>
                <tr>
                    <th>Nombre Completo</th>
                    <th>C.I.</th>
                    <th>Edad</th>
                    <th>Sexo</th>
                    <th>Seguro</th>
                    <th>Grupo Sanguíneo</th>
                    <th>Estado</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody id="tabla-pacientes">
                {% include 'admin/includes/pacientes_rows.html' %}
            </tbody>
        </table>
    </div>
    <div class="paginacion">
        {% if page_obj.has_previous %}
            <a href="?page={{ page_obj.previous_page_number }}">Anterior</a>
        {% endif %}
        <span>Página {{ page_obj.number }} de {{ page_obj.paginator.num_pages }}</span>
        {% if page_obj.has_next %}
            <a href="?page={{ page_obj.next_page_number }}">Siguiente</a>
        {% endif %}
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'admin/js/listar_pacientes.js' %}"></script>
{% endblock %}
